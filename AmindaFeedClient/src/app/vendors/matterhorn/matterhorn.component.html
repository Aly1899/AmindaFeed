<p-tabView class="h-full" [(activeIndex)]="tabIndex">
  <p-tabPanel class="h-full" header="Available Items">
    @if (isLoading === true) {
      <div class="flex-1 w-full h-full place-items-center">
        <p-progressSpinner class="flex" styleClass="w-20rem h-20rem" aria-label="Loading"></p-progressSpinner>
      </div>
    } @else {
      <div class="flex flex-col gap-2">
        <div class="flex flex-wrap w-full gap-1">
          @for(category of categories; track category.matterhornId){
            <p-tag (click)="onCategorySelect(category.matterhornId)" class="category" [style]="{'white-space':'nowrap', 'background': 'linear-gradient(-225deg,#AC32E4 0%,#7918F2 48%,#4801FF 100%)'}">
              <div class="flex align-items-center gap-2">
                  <span class="text-base">{{category.matterhornName}}</span>
              </div>
          </p-tag>
          }
        </div>
        
        <p-table [value]="matProducts" [(selection)]="selectedProducts" styleClass="p-datatable-striped"
                 [tableStyle]="{'min-width': '60rem'}">
          <ng-template pTemplate="caption">
            <div class="flex flex-row gap-2 items-center justify-content-between">
              <div class="flex align-items-center justify-content-between">
                Products
              </div>
              <p-button class="flex" (click)="onAdd()">Add Selected Items</p-button>

            </div>
          </ng-template>
          <ng-template pTemplate="header">
            <tr>
              <th style="width: 4rem">
                <p-tableHeaderCheckbox></p-tableHeaderCheckbox>
              </th>
              <th>Image</th>
              <th>ProductId</th>
              <th>Name</th>
              <th>Purchase Price</th>
              <th>Sales Price</th>
              <th>Size/Stock</th>
            </tr>
          </ng-template>
          <ng-template pTemplate="body" let-matProduct let-rowIndex="rowIndex">
            <tr>
              <td>
                <p-tableCheckbox [value]="matProduct"></p-tableCheckbox>
              </td>
              <td><img [src]="matProduct.images[0]"
                       [alt]="matProduct.id"
                       width="70"
                       class="shadow-4"
                       (click)="onImageClick(rowIndex)"/>
              </td>
              <td>{{ matProduct.id }}</td>
              <td>{{ matProduct.name }}</td>
              <td>{{ matProduct.purchasePrice }}</td>
              <td>{{ matProduct.salePrice }}</td>
              <td class="flex items-center">
                <div class="flex flex-col gap-0 items-center">
                  @for(variant of matProduct.variants; track variant.variant_uid ){
                    <div class="flex gap-1 text-xs h-3.5">
                      <p>{{variant.name}}</p>
                      <p>:</p>
                      <p>{{variant.stock}}</p>
                    </div>
                  }
                </div>
              </td>


            </tr>
          </ng-template>
          <ng-template pTemplate="summary">
            <div class="flex align-items-center justify-content-between">
              In total there are {{ matProducts ? matProducts.length : 0 }} products.
            </div>
          </ng-template>
        </p-table>
        <p-galleria [value]="galeryImages" [(visible)]="displayBasic2" [containerStyle]="{'max-width': '100%'}"
                    [numVisible]="3"
                    [circular]="true" [fullScreen]="true" [showItemNavigators]="true" [showThumbnails]="true"
                    [baseZIndex]="100000">
          <ng-template pTemplate="item" let-item>
            <img [src]="item" style="width: 600px; display: block;"/>
          </ng-template>
          <ng-template pTemplate="thumbnail" let-item>
            <div class="grid grid-nogutter justify-content-center">
              <img [src]="item" style="width: 50px; display: block;"/>
            </div>
          </ng-template>
        </p-galleria>
      </div>
    }
  </p-tabPanel>
  <p-tabPanel header="Uploaded To Aminda">
    <p>
      Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium, totam rem
      aperiam, eaque ipsa quae ab illo inventore veritatis et quasi architecto beatae vitae dicta sunt explicabo. Nemo
      enim
      ipsam voluptatem quia voluptas sit aspernatur aut odit aut fugit, sed quia consequuntur magni dolores eos qui
      ratione voluptatem sequi nesciunt. Consectetur, adipisci velit, sed quia non numquam eius modi.
    </p>
  </p-tabPanel>
  <p-tabPanel header="Other">

    <p>
      At vero eos et accusamus et iusto odio dignissimos ducimus qui blanditiis praesentium voluptatum deleniti atque
      corrupti quos dolores et quas molestias excepturi sint occaecati cupiditate non provident, similique sunt in culpa
      qui officia deserunt mollitia animi, id est laborum et dolorum fuga. Et harum quidem rerum facilis est et expedita
      distinctio. Nam libero tempore, cum soluta nobis est eligendi optio cumque nihil impedit quo minus.
    </p>
  </p-tabPanel>
</p-tabView>
